<ng-container *rxLet="showSlide$; let showSlide">

  <div class="min-h-screen bg-white">
    <nav *rxLet="showHamburgerMenu$; let showHamburgerMenu" class="bg-white border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
          <div class="flex">
            <div class="flex-shrink-0 flex items-center">
              <img class="block lg:hidden h-8 w-auto" src="https://tailwindui.com/img/logos/workflow-mark-on-white.svg" alt="Workflow logo">
              <img class="hidden lg:block h-8 w-auto" src="https://tailwindui.com/img/logos/workflow-logo-on-white.svg" alt="Workflow logo">
            </div>
            <div class="hidden sm:-my-px sm:ml-6 space-x-8 sm:flex">
              <a href="#" class="inline-flex items-center px-1 pt-1 border-b-2 border-indigo-500 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out">
                Dashboard
              </a>

              <a href="#" class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out">
                Team
              </a>

              <a href="#" class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out">
                Projects
              </a>

              <a href="#" class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out">
                Calendar
              </a>
            </div>
          </div>
          <div class="hidden sm:ml-6 sm:flex sm:items-center">

            <!-- Profile dropdown -->
            <div class="ml-3 relative">
              <div>
                <button class="flex text-sm border-2 border-transparent rounded-full focus:outline-none focus:border-gray-300 transition duration-150 ease-in-out"
                        id="user-menu"
                        aria-label="User menu"
                        aria-haspopup="true"
                        (click)="userClickedProfileButton()">
                  <img class="h-8 w-8 rounded-full" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="">
                </button>
              </div>
              <div [ngTransition]="showProfileDropdown$ | push"
                   ngTransitionEnter="transition ease-out duration-200"
                   ngTransitionEnterStart="transform opacity-0 scale-95"
                   ngTransitionEnterEnd="transform opacity-100 scale-100"
                   ngTransitionLeave="transition ease-in duration-75"
                   ngTransitionLeaveStart="transform opacity-100 scale-100"
                   ngTransitionLeaveEnd="transform opacity-0 scale-95"
                   class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg">
                <div class="py-1 rounded-md bg-white shadow-xs">
                  <a href="#" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out">
                    Your Profile
                  </a>

                  <a href="#" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out">
                    Settings
                  </a>

                  <a href="#" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out">
                    Sign out
                  </a>
                </div>
              </div>
            </div>
          </div>
          <div class="-mr-2 flex items-center sm:hidden">
            <!-- Mobile menu button -->
            <button class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"
                    (click)="userClickedHamburgerButton()">
              <svg class="block h-6 w-6"
                   stroke="currentColor"
                   fill="none"
                   viewBox="0 0 24 24"
                   [class.block]="!showHamburgerMenu"
                   [class.hidden]="showHamburgerMenu">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
              <svg class="hidden h-6 w-6"
                   stroke="currentColor"
                   fill="none"
                   viewBox="0 0 24 24"
                   [class.block]="showHamburgerMenu"
                   [class.hidden]="!showHamburgerMenu">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!--
        Mobile menu, toggle classes based on menu state.
      -->
      <div class="sm:hidden"
           [class.block]="showHamburgerMenu"
           [class.hidden]="!showHamburgerMenu">
        <div class="pt-2 pb-3 space-y-1">
          <a href="#" class="block pl-3 pr-4 py-2 border-l-4 border-indigo-500 text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out">
            Dashboard
          </a>

          <a href="#" class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out">
            Team
          </a>

          <a href="#" class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out">
            Projects
          </a>

          <a href="#" class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out">
            Calendar
          </a>
        </div>
        <div class="pt-4 pb-3 border-t border-gray-200">
          <div class="flex items-center px-4 space-x-3">
            <div class="flex-shrink-0">
              <img class="h-10 w-10 rounded-full" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="">
            </div>
            <div>
              <div class="text-base font-medium leading-6 text-gray-800">Tom Cook</div>
              <div class="text-sm font-medium leading-5 text-gray-500">tom@example.com</div>
            </div>
          </div>
          <div class="mt-3 space-y-1" role="menu" aria-orientation="vertical" aria-labelledby="user-menu">
            <a href="#" class="block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 focus:outline-none focus:text-gray-800 focus:bg-gray-100 transition duration-150 ease-in-out" role="menuitem">
              Your Profile
            </a>

            <a href="#" class="block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 focus:outline-none focus:text-gray-800 focus:bg-gray-100 transition duration-150 ease-in-out" role="menuitem">
              Settings
            </a>

            <a href="#" class="block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 focus:outline-none focus:text-gray-800 focus:bg-gray-100 transition duration-150 ease-in-out" role="menuitem">
              Sign out
            </a>
          </div>
        </div>
      </div>
    </nav>

    <div class="py-10">
      <header>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <h1 class="text-3xl font-bold leading-tight text-gray-900">
            Welcome to ng-transition-issues16!
          </h1>
        </div>
      </header>
      <main>
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
          <!-- Replace with your content -->
          <div class="px-4 py-8 sm:px-0">
            <div class="border-4 border-dashed border-gray-200 rounded-lg h-96 py-8">

              <div class="text-center">

                <div>Message: {{ hello$ | async | json }}</div>

                <div class="flex justify-center align-middle mt-4">
                <span role="checkbox"
                      tabindex="0"
                      class="bg-gray-200 relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:shadow-outline"
                      [attr.aria-checked]="showSlide ? 'true' : 'false'"
                      [class.bg-indigo-600]="showSlide"
                      [class.bg-gray-200]="!showSlide"
                      (click)="userClickedSlideToggle()">
                  <span
                    aria-hidden="true"
                    class="translate-x-0 inline-block h-5 w-5 rounded-full bg-white shadow transform transition ease-in-out duration-200"
                    [class.translate-x-5]="showSlide"
                    [class.translate-x-0]="!showSlide"
                  ></span>
                </span>
                  <span class="ml-4">Show slide over</span>
                </div>
              </div>
            </div>
          </div>
          <!-- /End replace -->
        </div>
      </main>
    </div>
  </div>

  <div [ngTransition]="showSlide"
       ngTransitionEnter="duration-500 sm:duration-700"
       ngTransitionLeave="duration-500 sm:duration-700"
       class="fixed inset-0 overflow-hidden">
    <div class="absolute inset-0 overflow-hidden">
      <div [ngTransition]="showSlide"
           ngTransitionEnter="ease-in-out duration-500"
           ngTransitionEnterStart="opacity-0"
           ngTransitionEnterEnd="opacity-100"
           ngTransitionLeave="ease-in-out duration-500"
           ngTransitionLeaveStart="opacity-100"
           ngTransitionLeaveEnd="opacity-0"
           class="absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
      ></div>
      <section class="absolute inset-y-0 right-0 pl-10 max-w-full flex">
        <div [ngTransition]="showSlide"
             ngTransitionEnter="transform transition ease-in-out duration-500 sm:duration-700"
             ngTransitionEnterStart="translate-x-full"
             ngTransitionEnterEnd="translate-x-0"
             ngTransitionLeave="transform transition ease-in-out duration-500 sm:duration-700"
             ngTransitionLeaveStart="translate-x-0"
             ngTransitionLeaveEnd="translate-x-full"
             class="relative w-screen max-w-md">
          <div [ngTransition]="showSlide"
               ngTransitionEnter="ease-in-out duration-500"
               ngTransitionEnterStart="opacity-0"
               ngTransitionEnterEnd="opacity-100"
               ngTransitionLeave="ease-in-out duration-500"
               ngTransitionLeaveStart="opacity-100"
               ngTransitionLeaveEnd="opacity-0"
               class="absolute top-0 left-0 -ml-8 pt-4 pr-2 flex sm:-ml-10 sm:pr-4">
            <button aria-label="Close panel"
                    class="text-gray-300 hover:text-white transition ease-in-out duration-150"
                    (click)="userClickedSlideExit()">
              <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          <div class="h-full flex flex-col space-y-6 py-6 bg-white shadow-xl overflow-y-scroll">
            <header class="px-4 sm:px-6">
              <h2 class="text-lg leading-7 font-medium text-gray-900">
                Panel title
              </h2>
            </header>
            <div class="relative flex-1 px-4 sm:px-6">
              <div class="absolute inset-0 px-4 sm:px-6">
                <div class="h-full border-2 border-dashed border-gray-200"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</ng-container>
